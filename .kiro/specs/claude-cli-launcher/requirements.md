# 需求文档

## 介绍

开发一个 shell 脚本，用于在终端中启动 claude cli 工具。该脚本需要支持通过命令行参数来配置不同的环境变量，以便在不同场景下使用不同的配置启动 claude 命令。

## 需求

### 需求 1

**用户故事：** 作为开发者，我希望能够通过一个简单的脚本启动 claude cli，这样我就不需要每次都手动设置环境变量和输入完整的 claude 命令。 脚本命令的名称为：mycld

#### 验收标准

1. WHEN 用户执行脚本时 THEN 系统应该能够通过调用 claude 命令成功启动 claude cli
2. WHEN 脚本执行完成后 THEN claude cli 应该正常运行并可以接受用户输入

### 需求 2

**用户故事：** 作为开发者，我希望能够通过命令行参数来选择不同的配置环境，这样我就可以在不同的项目或场景中使用不同的 claude 配置。

#### 验收标准

1. WHEN 用户未提供参数时 THEN 系统应该直接启动 claude 命令，并接受任意的原始命令参数输入
2. WHEN 用户提供 `--k2` 参数时 THEN 系统应该 source k2.zrc ，以便完成 k2 的相关的环境变量的设置
3. WHEN 用户提供 `--anyrouter` 参数时 THEN 系统应该 source anyrouter.zrc，设置相关的环境变量
4. 这两个 zrc 文件在 ~/tools/mac_zsh 目录下面

### 需求 3

**用户故事：** 作为开发者，我希望脚本能够显示帮助信息，这样我就能了解如何正确使用这个脚本。

#### 验收标准

1. WHEN 用户提供 `--help` 或 `-h` 参数时 THEN 系统应该显示使用说明和可用参数列表
2. WHEN 用户提供无效参数时 THEN 系统应该显示错误信息并提示正确用法

### 需求 4

**用户故事：** 作为开发者，我希望脚本能够验证必要的环境变量和依赖，这样我就能在启动前知道是否存在配置问题。

#### 验收标准

1. WHEN 脚本启动时 THEN 系统应该检查 claude cli 是否已安装
2. WHEN 当输入了参数，必要的环境变量缺失时 THEN 系统应该显示错误信息并退出，有两个环境变量需要验证：
  - ANTHROPIC_BASE_URL（必须设置）
  - ANTHROPIC_AUTH_TOKEN （必须设置）  
  当没有输入参数时，必须不存在这两个环境变量
3. WHEN 所有依赖都满足时 THEN 系统应该继续执行启动流程

### 需求 5

**用户故事：** 作为开发者，我希望脚本能够提供详细的日志输出，这样我就能了解脚本的执行过程和调试问题。

#### 验收标准

1. WHEN 用户提供 `--verbose` 或 `-v` 参数时 THEN 系统应该显示详细的执行日志
2. WHEN 脚本执行过程中 THEN 系统应该显示当前正在执行的步骤
3. WHEN 发生错误时 THEN 系统应该显示详细的错误信息和可能的解决方案