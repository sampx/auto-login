<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web任务管理器</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="/" class="navbar-brand">Web任务管理器</a>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a href="/" class="nav-link">首页</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- 主要内容 -->
    <div class="container">
        <!-- 标签页导航 -->
        <div class="tabs">
            <div class="tab active" data-target="tasks">任务管理</div>
            <div class="tab" data-target="config">系统配置</div>
        </div>

        <!-- 任务管理标签页 -->
        <div id="tasks" class="tab-content active">
            <div class="task-management-layout">
                <!-- 任务列表 -->
                <div class="task-list-section">
                    <div class="card">
                        <div class="card-header">
                            <span>任务列表</span>
                            <button class="btn btn-primary btn-sm" onclick="loadTasks()">刷新</button>
                        </div>
                        <div class="card-body">
                            <div id="taskList">
                                <div class="text-center">
                                    <div class="spinner"></div>
                                    <p>加载中...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 日志查看区域 -->
                <div class="log-section">
                    <div class="card">
                        <div class="card-header">
                            <span id="logTitle">任务日志</span>
                            <div class="log-controls">
                                <button class="btn btn-secondary btn-sm" onclick="refreshLog()">刷新日志</button>
                                <button class="btn btn-secondary btn-sm" onclick="clearLogs()">清空日志</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="log-viewer" id="logViewer">
                                <div class="log-placeholder">
                                    <p>请选择一个任务查看日志</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="message-container"></div>
        </div>

        <!-- 系统配置标签页 -->
        <div id="config" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <span>系统配置</span>
                </div>
                <div class="card-body">
                    <form id="configForm">
                        <div class="form-group">
                            <label for="WEBSITE_URL" class="form-label">网站URL</label>
                            <input type="text" id="WEBSITE_URL" name="WEBSITE_URL" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="USERNAME" class="form-label">用户名</label>
                            <input type="text" id="USERNAME" name="USERNAME" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="PASSWORD" class="form-label">密码</label>
                            <input type="password" id="PASSWORD" name="PASSWORD" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="MAX_RETRIES" class="form-label">最大重试次数</label>
                            <input type="number" id="MAX_RETRIES" name="MAX_RETRIES" class="form-control" min="1" max="10" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="LOGIN_SCHEDULE_TYPE" class="form-label">调度类型</label>
                            <select id="LOGIN_SCHEDULE_TYPE" name="LOGIN_SCHEDULE_TYPE" class="form-control" required>
                                <option value="monthly">每月</option>
                                <option value="minutes">每分钟（测试用）</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="LOGIN_SCHEDULE_DATE" class="form-label">调度日期（每月模式下的日期）</label>
                            <input type="number" id="LOGIN_SCHEDULE_DATE" name="LOGIN_SCHEDULE_DATE" class="form-control" min="1" max="31" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="LOGIN_SCHEDULE_TIME" class="form-label">调度时间（HH:MM格式）</label>
                            <input type="text" id="LOGIN_SCHEDULE_TIME" name="LOGIN_SCHEDULE_TIME" class="form-control" pattern="^([01]?[0-9]|2[0-3]):[0-5][0-9]$" placeholder="例如：10:30" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="LOG_LEVEL" class="form-label">日志级别</label>
                            <select id="LOG_LEVEL" name="LOG_LEVEL" class="form-control" required>
                                <option value="DEBUG">DEBUG</option>
                                <option value="INFO">INFO</option>
                                <option value="WARNING">WARNING</option>
                                <option value="ERROR">ERROR</option>
                                <option value="CRITICAL">CRITICAL</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">保存配置</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/static/js/main.js"></script>
</body>
</html>